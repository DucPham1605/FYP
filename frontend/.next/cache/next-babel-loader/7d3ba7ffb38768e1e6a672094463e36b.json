{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\journalProject\\\\frontend\\\\pages\\\\password\\\\reset\\\\[token].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState } from 'react';\nimport { withRouter } from 'next/router';\nimport Layout from '../../../components/Layout';\nimport { resetPassword } from '../../../actions/auth';\n\nvar ResetPassword = function ResetPassword(_ref) {\n  var router = _ref.router;\n\n  var _useState = useState({\n    newPassword: \"\",\n    confirmPassword: \"\",\n    message: \"\",\n    error: \"\",\n    isSent: false\n  }),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var newPassword = values.newPassword,\n      confirmPassword = values.confirmPassword,\n      message = values.message,\n      error = values.error,\n      isSent = values.isSent;\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    var resetPasswordLink = router.query.token;\n\n    if (newPassword === confirmPassword) {\n      var updateInfo = {\n        resetPasswordLink: resetPasswordLink,\n        newPassword: newPassword\n      };\n      resetPassword({\n        updateInfo: updateInfo\n      }).then(function (data) {\n        if (data.error) {\n          setValues(_objectSpread({}, values, {\n            error: data.error\n          }));\n        } else {\n          setValues(_objectSpread({}, values, {\n            message: data.message,\n            newPassword: \"\",\n            confirmPassword: \"\",\n            isSent: true\n          }));\n        }\n      });\n    } else {\n      setValues(_objectSpread({}, values, {\n        error: \"Password is not match, please re-enter your password\",\n        isSent: false\n      }));\n    }\n  };\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      var _objectSpread2;\n\n      setValues(_objectSpread({}, values, (_objectSpread2 = {}, _defineProperty(_objectSpread2, name, e.target.value), _defineProperty(_objectSpread2, \"error\", \"\"), _objectSpread2)));\n    };\n  };\n\n  var showStatus = function showStatus() {\n    if (error) {\n      return __jsx(\"div\", {\n        className: \"alert alert-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, error);\n    } else if (isSent) {\n      return __jsx(\"div\", {\n        className: \"alert alert-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, message);\n    }\n  };\n\n  var showResetForm = function showResetForm() {\n    if (!isSent) {\n      return __jsx(\"form\", {\n        onSubmit: handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"form-group pt-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, __jsx(\"input\", {\n        onChange: handleChange(\"newPassword\"),\n        className: \"form-control\",\n        value: newPassword,\n        type: \"password\",\n        placeholder: \"Enter your new password here\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        className: \"form-group pt-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, __jsx(\"input\", {\n        onChange: handleChange(\"confirmPassword\"),\n        className: \"form-control\",\n        value: confirmPassword,\n        type: \"password\",\n        placeholder: \"Confirm your new password\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, __jsx(\"button\", {\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Change your password\")));\n    }\n  };\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, __jsx(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"Reset Password\"), showStatus(), showResetForm()));\n};\n\nexport default withRouter(ResetPassword);","map":{"version":3,"sources":["D:/journalProject/frontend/pages/password/reset/[token].js"],"names":["useState","withRouter","Layout","resetPassword","ResetPassword","router","newPassword","confirmPassword","message","error","isSent","values","setValues","handleSubmit","e","preventDefault","resetPasswordLink","query","token","updateInfo","then","data","handleChange","name","target","value","showStatus","showResetForm"],"mappings":"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","sourcesContent":["import {useState} from 'react'\r\nimport {withRouter} from 'next/router'\r\nimport Layout from '../../../components/Layout'\r\nimport {resetPassword} from '../../../actions/auth'\r\n\r\n\r\nconst ResetPassword = ({router}) => {\r\n\r\nconst [values,setValues] = useState({\r\n\tnewPassword:\"\",\r\n\tconfirmPassword:\"\",\r\n\tmessage:\"\",\r\n\terror:\"\",\r\n\tisSent: false\r\n})\r\n\r\nconst {newPassword,confirmPassword,message,error,isSent} = values\r\n\r\nconst handleSubmit = e =>{\r\n\te.preventDefault()\r\n\tconst resetPasswordLink = router.query.token\r\n\tif(newPassword === confirmPassword){\r\n\t\tconst updateInfo = {resetPasswordLink,newPassword}\r\n\t\tresetPassword({updateInfo}).then(data=>{\r\n\t\t\tif(data.error){\r\n\t\t\t\tsetValues({...values,error:data.error,})\r\n\t\t\t} else {\r\n\t\t\t\tsetValues({...values,message:data.message,newPassword:\"\",confirmPassword:\"\",isSent: true})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\telse {\r\n\t\tsetValues({...values,error: \"Password is not match, please re-enter your password\",isSent: false})\r\n\t}\r\n}\r\n\r\nconst handleChange = name => e => {\r\n\tsetValues({...values,[name]: e.target.value,error:\"\"})\r\n}\r\n\r\nconst showStatus = () => {\r\n\tif(error){\r\n\t\t\treturn <div className=\"alert alert-danger\">{error}</div>\r\n\t\t} else if(isSent) {\r\n\t\t\treturn <div className=\"alert alert-success\">{message}</div>\r\n\t\t}\r\n}\r\n\r\nconst showResetForm = () => {\r\n\tif(!isSent){\r\n\t\treturn (\r\n\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t<div className=\"form-group pt-4\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tonChange={handleChange(\"newPassword\")}\r\n\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\tvalue={newPassword}\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tplaceholder=\"Enter your new password here\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"form-group pt-4\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tonChange={handleChange(\"confirmPassword\")}\r\n\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\tvalue={confirmPassword}\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tplaceholder=\"Confirm your new password\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<button className=\"btn btn-primary\">Change your password</button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</form>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nreturn (\r\n\t<Layout>\r\n\t\t<div className=\"container\">\r\n\t\t\t<h3>Reset Password</h3>\r\n\t\t\t{showStatus()}\r\n\t\t\t{showResetForm()}\r\n\t\t</div>\r\n\t</Layout>\r\n)\r\n}\r\n\r\nexport default withRouter(ResetPassword)"]},"metadata":{},"sourceType":"module"}