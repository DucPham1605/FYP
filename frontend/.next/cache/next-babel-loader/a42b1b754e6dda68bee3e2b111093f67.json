{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ducp1\\\\Desktop\\\\journalProject\\\\frontend\\\\components\\\\Journal\\\\AmendJournal.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from 'next/link';\nimport { useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport { withRouter } from 'next/router'; //use router,export component with router\n\nimport { getCookie, isLoggedIn } from '../../actions/handleCookie';\nimport { listJournalForManage, deleteJournal, updateJournal } from '../../actions/journal';\nimport renderHTML from 'react-render-html';\nimport moment from 'moment';\n\nconst AmendJournal = () => {\n  const {\n    0: journals,\n    1: setJournals\n  } = useState([]);\n  const {\n    0: message,\n    1: setMessage\n  } = useState('');\n  const token = getCookie('token'); //when component mount\n\n  useEffect(() => {\n    loadJournals();\n  }, []);\n\n  const loadJournals = () => {\n    listJournalForManage().then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setJournals(data);\n      }\n    });\n  };\n\n  const deleteConfirm = () => {\n    let answer = window.confirm('Delete this journal ?');\n\n    if (answer) {\n      deleteJournal(slug, token).then(data => {\n        if (data.error) {\n          console.log(data.error);\n        } else {\n          setMessage(data.message);\n          loadJournals();\n        }\n      });\n    }\n  };\n\n  const showJournals = () => {\n    return journals.map((journal, index) => {\n      return __jsx(\"div\", {\n        className: \"mt-5\",\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, __jsx(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, journal.title), __jsx(\"p\", {\n        className: \"mark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, \"Written by \", journal.author.name, \"  || Created at \", moment(journal.createdAt).fromNow()), __jsx(\"button\", {\n        className: \"btn btn-sm btn-danger\",\n        onClick: deleteConfirm(journal.slug),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, \"Delete\"));\n    });\n  };\n\n  return __jsx(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"col-md-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, showJournals())));\n};\n\nexport default AmendJournal;","map":{"version":3,"sources":["C:/Users/ducp1/Desktop/journalProject/frontend/components/Journal/AmendJournal.js"],"names":["Link","useState","useEffect","Router","withRouter","getCookie","isLoggedIn","listJournalForManage","deleteJournal","updateJournal","renderHTML","moment","AmendJournal","journals","setJournals","message","setMessage","token","loadJournals","then","data","error","console","log","deleteConfirm","answer","window","confirm","slug","showJournals","map","journal","index","title","author","name","createdAt","fromNow"],"mappings":";;;AAAA,OAAOA,IAAP,MAAiB,WAAjB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAASC,UAAT,QAA2B,aAA3B,C,CAA0C;;AAC1C,SAASC,SAAT,EAAoBC,UAApB,QAAsC,4BAAtC;AACA,SAASC,oBAAT,EAA8BC,aAA9B,EAA4CC,aAA5C,QAAiE,uBAAjE;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,OAAOC,MAAP,MAAmB,QAAnB;;AAEA,MAAMC,YAAY,GAAG,MAAM;AAC1B,QAAM;AAAA,OAACC,QAAD;AAAA,OAAUC;AAAV,MAAyBb,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAM;AAAA,OAACc,OAAD;AAAA,OAASC;AAAT,MAAuBf,QAAQ,CAAC,EAAD,CAArC;AACA,QAAMgB,KAAK,GAAGZ,SAAS,CAAC,OAAD,CAAvB,CAH0B,CAK1B;;AACAH,EAAAA,SAAS,CAAC,MAAI;AACbgB,IAAAA,YAAY;AACZ,GAFQ,EAEP,EAFO,CAAT;;AAIA,QAAMA,YAAY,GAAG,MAAM;AAC1BX,IAAAA,oBAAoB,GAAGY,IAAvB,CAA4BC,IAAI,IAAE;AACjC,UAAGA,IAAI,CAACC,KAAR,EAAc;AACbC,QAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACC,KAAjB;AACA,OAFD,MAEO;AACNP,QAAAA,WAAW,CAACM,IAAD,CAAX;AACA;AACD,KAND;AAOA,GARD;;AAUA,QAAMI,aAAa,GAAG,MAAM;AAC1B,QAAIC,MAAM,GAAGC,MAAM,CAACC,OAAP,CAAe,uBAAf,CAAb;;AACA,QAAGF,MAAH,EAAU;AACTjB,MAAAA,aAAa,CAACoB,IAAD,EAAMX,KAAN,CAAb,CAA0BE,IAA1B,CAA+BC,IAAI,IAAE;AACpC,YAAGA,IAAI,CAACC,KAAR,EAAc;AACbC,UAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACC,KAAjB;AACA,SAFD,MAEO;AACNL,UAAAA,UAAU,CAACI,IAAI,CAACL,OAAN,CAAV;AACAG,UAAAA,YAAY;AACZ;AACD,OAPD;AAQA;AACF,GAZD;;AAcA,QAAMW,YAAY,GAAG,MAAM;AAC1B,WAAOhB,QAAQ,CAACiB,GAAT,CAAa,CAACC,OAAD,EAASC,KAAT,KAAiB;AACpC,aACC;AAAK,QAAA,SAAS,EAAC,MAAf;AAAsB,QAAA,GAAG,EAAEA,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKD,OAAO,CAACE,KAAb,CADA,EAEA;AAAG,QAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACYF,OAAO,CAACG,MAAR,CAAeC,IAD3B,sBACiDxB,MAAM,CAACoB,OAAO,CAACK,SAAT,CAAN,CAA0BC,OAA1B,EADjD,CAFA,EAKA;AAAQ,QAAA,SAAS,EAAC,uBAAlB;AAA0C,QAAA,OAAO,EAAEb,aAAa,CAACO,OAAO,CAACH,IAAT,CAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALA,CADD;AASA,KAVM,CAAP;AAWA,GAZD;;AAcA,SACC,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA4BC,YAAY,EAAxC,CADD,CADF,CADD;AAOA,CAvDD;;AAyDA,eAAejB,YAAf","sourcesContent":["import Link from 'next/link';\r\nimport { useState, useEffect } from 'react';\r\nimport Router from 'next/router';\r\nimport { withRouter } from 'next/router'; //use router,export component with router\r\nimport { getCookie, isLoggedIn } from '../../actions/handleCookie';\r\nimport { listJournalForManage,deleteJournal,updateJournal } from '../../actions/journal';\r\nimport renderHTML from 'react-render-html'\r\nimport moment from 'moment'\r\n\r\nconst AmendJournal = () => {\r\n\tconst [journals,setJournals] = useState([])\r\n\tconst [message,setMessage] = useState('')\r\n\tconst token = getCookie('token')\r\n\r\n\t//when component mount\r\n\tuseEffect(()=>{\r\n\t\tloadJournals()\r\n\t},[])\r\n\r\n\tconst loadJournals = () => {\r\n\t\tlistJournalForManage().then(data=>{\r\n\t\t\tif(data.error){\r\n\t\t\t\tconsole.log(data.error)\r\n\t\t\t} else {\r\n\t\t\t\tsetJournals(data)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst deleteConfirm = () => {\r\n\t\t\tlet answer = window.confirm('Delete this journal ?')\r\n\t\t\tif(answer){\r\n\t\t\t\tdeleteJournal(slug,token).then(data=>{\r\n\t\t\t\t\tif(data.error){\r\n\t\t\t\t\t\tconsole.log(data.error)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetMessage(data.message)\r\n\t\t\t\t\t\tloadJournals()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t}\r\n\r\n\tconst showJournals = () => {\r\n\t\treturn journals.map((journal,index)=>{\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"mt-5\" key={index}>\r\n\t\t\t\t<h3>{journal.title}</h3>\r\n\t\t\t\t<p className=\"mark\">\r\n\t\t\t\tWritten by {journal.author.name}  || Created at {moment(journal.createdAt).fromNow()} \r\n\t\t\t\t</p>\r\n\t\t\t\t<button className=\"btn btn-sm btn-danger\" onClick={deleteConfirm(journal.slug)}>Delete</button>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-md-12\">{showJournals()}</div>\r\n\t\t\t\t</div>\t\r\n\t\t</React.Fragment>\r\n\t)\r\n}\r\n\r\nexport default AmendJournal"]},"metadata":{},"sourceType":"module"}