{"ast":null,"code":"import fetch from 'isomorphic-fetch';\nimport { API } from '../config';\nimport { isLoggedIn } from './handleCookie';\nimport { handleTokenExpiry } from './auth'; //get member profile\n\nexport var getProfile = function getProfile(token) {\n  var endPoint;\n\n  if (isLoggedIn() && isLoggedIn().role === \"admin\") {\n    endPoint = \"\".concat(API, \"/admin/profile\");\n  } else if (isLoggedIn() && isLoggedIn().role === \"member\") {\n    endPoint = \"\".concat(API, \"/member/profile\");\n  }\n\n  return fetch(endPoint, {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      Authorization: \"Bearer \".concat(token)\n    }\n  }).then(function (response) {\n    handleTokenExpiry(response);\n    return response.json();\n  })[\"catch\"](function (error) {\n    return console.log(error);\n  });\n};\nexport var updateProfile = function updateProfile(token, member) {\n  var endPoint;\n\n  if (isLoggedIn() && isLoggedIn().role === \"admin\") {\n    endPoint = \"\".concat(API, \"/admin/update\");\n  } else if (isLoggedIn() && isLoggedIn().role === \"member\") {\n    endPoint = \"\".concat(API, \"/member/update\");\n  }\n\n  return fetch(\"\".concat(API, \"/admin/update\"), {\n    method: 'PUT',\n    headers: {\n      Accept: 'application/json',\n      Authorization: \"Bearer \".concat(token)\n    },\n    body: member\n  }).then(function (response) {\n    handleTokenExpiry(response);\n    return response.json();\n  })[\"catch\"](function (error) {\n    return console.log(error);\n  });\n};\nexport var getProfileAndJournal = function getProfileAndJournal(token) {\n  var endPoint;\n\n  if (isLoggedIn() && isLoggedIn().role === \"admin\") {\n    endPoint = \"\".concat(API, \"/admin/profile/journal\");\n  } else if (isLoggedIn() && isLoggedIn().role === \"member\") {\n    endPoint = \"\".concat(API, \"/member/profile/journal\");\n  }\n\n  return fetch(endPoint, {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      Authorization: \"Bearer \".concat(token)\n    }\n  }).then(function (response) {\n    handleTokenExpiry(response);\n    return response.json();\n  })[\"catch\"](function (error) {\n    return console.log(error);\n  });\n};","map":{"version":3,"sources":["D:/journalProject/frontend/actions/member.js"],"names":["fetch","API","isLoggedIn","handleTokenExpiry","getProfile","token","endPoint","role","method","headers","Accept","Authorization","then","response","json","error","console","log","updateProfile","member","body","getProfileAndJournal"],"mappings":"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","sourcesContent":["import fetch from 'isomorphic-fetch'\r\nimport {API} from '../config'\r\nimport {isLoggedIn} from './handleCookie'\r\nimport {handleTokenExpiry} from './auth'\r\n\r\n\r\n\r\n//get member profile\r\nexport const getProfile = token => {\r\n\r\n\tlet endPoint \r\n\r\n\t if(isLoggedIn() && isLoggedIn().role === \"admin\"){\r\n\t \tendPoint = `${API}/admin/profile`\r\n\t } else if(isLoggedIn() && isLoggedIn().role === \"member\"){\r\n\t \tendPoint = `${API}/member/profile`\r\n\t }\r\n\r\n\treturn fetch(endPoint,{\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t}\r\n\t})\r\n\t.then(response=>{\r\n\t\thandleTokenExpiry(response)\r\n\t\treturn response.json()\r\n\t})\r\n\t.catch(error => console.log(error))\r\n}\r\n\r\n\r\nexport const updateProfile = (token,member) => {\r\n\r\n\tlet endPoint \r\n\r\n\t if(isLoggedIn() && isLoggedIn().role === \"admin\"){\r\n\t \tendPoint = `${API}/admin/update`\r\n\t } else if(isLoggedIn() && isLoggedIn().role === \"member\"){\r\n\t \tendPoint = `${API}/member/update`\r\n\t }\r\n\r\n\treturn fetch(`${API}/admin/update`,{\r\n\t\tmethod: 'PUT',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: member\r\n\t})\r\n\t.then(response=>{\r\n\t\thandleTokenExpiry(response)\r\n\t\treturn response.json()\r\n\t})\r\n\t.catch(error => console.log(error))\r\n}\r\n\r\n\r\nexport const getProfileAndJournal = token => {\r\n\r\n\tlet endPoint \r\n\r\n\t if(isLoggedIn() && isLoggedIn().role === \"admin\"){\r\n\t \tendPoint = `${API}/admin/profile/journal`\r\n\t } else if(isLoggedIn() && isLoggedIn().role === \"member\"){\r\n\t \tendPoint = `${API}/member/profile/journal`\r\n\t }\r\n\r\n\treturn fetch(endPoint,{\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\tAccept: 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t}\r\n\t})\r\n\t.then(response => {\r\n\t\thandleTokenExpiry(response)\r\n\t\treturn response.json()\r\n\t})\r\n\t.catch(error=>console.log(error))\r\n}"]},"metadata":{},"sourceType":"module"}