{"ast":null,"code":"var _jsxFileName = \"D:\\\\journalProject\\\\frontend\\\\components\\\\Journal\\\\ManageJournal.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from 'next/link';\nimport { useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport { withRouter } from 'next/router'; //use router,export component with router\n\nimport { getCookie, isLoggedIn } from '../../actions/handleCookie';\nimport { listJournalForManage, deleteJournal, updateJournal } from '../../actions/journal';\nimport renderHTML from 'react-render-html';\nimport moment from 'moment';\n\nvar ManageJournal = function ManageJournal(_ref) {\n  var username = _ref.username,\n      role = _ref.role;\n\n  var _useState = useState([]),\n      journals = _useState[0],\n      setJournals = _useState[1];\n\n  var _useState2 = useState(''),\n      message = _useState2[0],\n      setMessage = _useState2[1];\n\n  var token = getCookie('token'); //when component mount\n\n  useEffect(function () {\n    loadJournals();\n  }, []);\n\n  var loadJournals = function loadJournals() {\n    listJournalForManage(username).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setJournals(data);\n      }\n    });\n  };\n\n  var removeJournal = function removeJournal(slug, token) {\n    deleteJournal(slug, token).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setMessage(data.message);\n        loadJournals();\n      }\n    });\n  };\n\n  var deleteConfirm = function deleteConfirm(slug, token) {\n    var answer = window.confirm('Delete this journal ?');\n\n    if (answer) {\n      removeJournal(slug, token);\n    }\n  };\n\n  var showMessage = function showMessage() {\n    if (message) {\n      return __jsx(\"div\", {\n        className: \"alert alert-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, message);\n    }\n  };\n\n  var showUpdateButton = function showUpdateButton(journal) {\n    return __jsx(Link, {\n      href: \"/admin/\".concat(journal.slug),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      className: \"btn btn-sm btn-warning ml-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, journal.slug));\n  };\n\n  var showJournals = function showJournals() {\n    return journals.map(function (journal, index) {\n      return __jsx(\"div\", {\n        className: \"pb-5\",\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, __jsx(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, journal.title), __jsx(\"p\", {\n        className: \"mark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"Written by \", journal.author.name, \"  || Created at \", moment(journal.createdAt).fromNow()), __jsx(\"button\", {\n        className: \"btn btn-sm btn-danger\",\n        onClick: function onClick() {\n          return deleteConfirm(journal.slug, token);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"Delete\"), showUpdateButton(journal));\n    });\n  };\n\n  return __jsx(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"col-md-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, showMessage(), showJournals())));\n};\n\nexport default ManageJournal;","map":{"version":3,"sources":["D:/journalProject/frontend/components/Journal/ManageJournal.js"],"names":["Link","useState","useEffect","Router","withRouter","getCookie","isLoggedIn","listJournalForManage","deleteJournal","updateJournal","renderHTML","moment","ManageJournal","username","role","journals","setJournals","message","setMessage","token","loadJournals","then","data","error","console","log","removeJournal","slug","deleteConfirm","answer","window","confirm","showMessage","showUpdateButton","journal","showJournals","map","index","title","author","name","createdAt","fromNow"],"mappings":"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","sourcesContent":["import Link from 'next/link';\r\nimport { useState, useEffect } from 'react';\r\nimport Router from 'next/router';\r\nimport { withRouter } from 'next/router'; //use router,export component with router\r\nimport { getCookie, isLoggedIn } from '../../actions/handleCookie';\r\nimport { listJournalForManage,deleteJournal,updateJournal } from '../../actions/journal';\r\nimport renderHTML from 'react-render-html'\r\nimport moment from 'moment'\r\n\r\nconst ManageJournal = ({username,role}) => {\r\n\r\n\tconst [journals,setJournals] = useState([])\r\n\tconst [message,setMessage] = useState('')\r\n\tconst token = getCookie('token')\r\n\r\n\t//when component mount\r\n\tuseEffect(()=>{\r\n\t\tloadJournals()\r\n\t},[])\r\n\r\n\tconst loadJournals = () => {\r\n\t\tlistJournalForManage(username).then(data=>{\r\n\t\t\tif(data.error){\r\n\t\t\t\tconsole.log(data.error)\r\n\t\t\t} else {\r\n\t\t\t\tsetJournals(data)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst removeJournal = (slug,token) => {\r\n\t\tdeleteJournal(slug,token).then(data=>{\r\n\t\t\tif(data.error){\r\n\t\t\t\tconsole.log(data.error)\r\n\t\t\t} else {\r\n\t\t\t\tsetMessage(data.message)\r\n\t\t\t\tloadJournals()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst deleteConfirm = (slug,token) => {\r\n\t\t\tlet answer = window.confirm('Delete this journal ?')\r\n\t\t\tif(answer){\r\n\t\t\t\tremoveJournal(slug,token)\r\n\t\t\t}\r\n\t}\r\n\r\n\tconst showMessage = () => {\r\n\t\tif(message){\r\n\t\t\treturn <div className=\"alert alert-warning\">{message}</div>\r\n\t\t}\r\n\t}\r\n\r\n\tconst showUpdateButton = (journal) => {\r\n\t\treturn (\r\n\t\t\t<Link href={`/admin/${journal.slug}`}>\r\n\t\t\t\t<a className=\"btn btn-sm btn-warning ml-2\">{journal.slug}</a>\r\n\t\t\t</Link>\r\n\t\t)\r\n\t}\r\n\r\n\tconst showJournals = () => {\r\n\t\treturn journals.map((journal,index)=>{\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"pb-5\" key={index}>\r\n\t\t\t\t<h3>{journal.title}</h3>\r\n\t\t\t\t<p className=\"mark\">\r\n\t\t\t\tWritten by {journal.author.name}  || Created at {moment(journal.createdAt).fromNow()} \r\n\t\t\t\t</p>\r\n\t\t\t\t<button className=\"btn btn-sm btn-danger\" onClick={()=>deleteConfirm(journal.slug,token)}>Delete</button>\r\n\t\t\t\t{showUpdateButton(journal)}\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t{showMessage()}\r\n\t\t\t\t\t\t{showJournals()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\t\r\n\t\t</React.Fragment>\r\n\t)\r\n}\r\n\r\nexport default ManageJournal"]},"metadata":{},"sourceType":"module"}