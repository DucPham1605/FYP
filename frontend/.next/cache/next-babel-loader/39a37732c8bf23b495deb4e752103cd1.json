{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ducp1\\\\Desktop\\\\journalProject\\\\frontend\\\\components\\\\Journal\\\\AmendJournal.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from 'next/link';\nimport { useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport { withRouter } from 'next/router'; //use router,export component with router\n\nimport { getCookie, isLoggedIn } from '../../actions/handleCookie';\nimport { listJournalForManage, deleteJournal, updateJournal } from '../../actions/journal';\nimport renderHTML from 'react-render-html';\nimport moment from 'moment';\n\nvar AmendJournal = function AmendJournal() {\n  var _useState = useState([]),\n      journals = _useState[0],\n      setJournals = _useState[1];\n\n  var _useState2 = useState(''),\n      message = _useState2[0],\n      setMessage = _useState2[1];\n\n  var token = getCookie('token'); //when component mount\n\n  useEffect(function () {\n    loadJournals();\n  }, []);\n\n  var loadJournals = function loadJournals() {\n    listJournalForManage().then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setJournals(data);\n      }\n    });\n  };\n\n  var removeJournal = function removeJournal(slug, token) {\n    deleteJournal(slug, token).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setMessage('Delete Successfully');\n        loadJournals();\n      }\n    });\n  };\n\n  var deleteConfirm = function deleteConfirm(slug) {\n    var answer = window.confirm('Delete this journal ?');\n\n    if (answer) {\n      removeJournal(slug);\n    }\n  };\n\n  var showJournals = function showJournals() {\n    return journals.map(function (journal, index) {\n      return __jsx(\"div\", {\n        className: \"mt-5 pb-5\",\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, __jsx(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, journal.title), __jsx(\"p\", {\n        className: \"mark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \"Written by \", journal.author.name, \"  || Created at \", moment(journal.createdAt).fromNow()), __jsx(\"button\", {\n        className: \"btn btn-sm btn-danger\",\n        onClick: function onClick() {\n          return deleteConfirm(journal.slug);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \"Delete\"));\n    });\n  };\n\n  return __jsx(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"col-md-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, showJournals())));\n};\n\nexport default AmendJournal;","map":{"version":3,"sources":["C:/Users/ducp1/Desktop/journalProject/frontend/components/Journal/AmendJournal.js"],"names":["Link","useState","useEffect","Router","withRouter","getCookie","isLoggedIn","listJournalForManage","deleteJournal","updateJournal","renderHTML","moment","AmendJournal","journals","setJournals","message","setMessage","token","loadJournals","then","data","error","console","log","removeJournal","slug","deleteConfirm","answer","window","confirm","showJournals","map","journal","index","title","author","name","createdAt","fromNow"],"mappings":"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","sourcesContent":["import Link from 'next/link';\r\nimport { useState, useEffect } from 'react';\r\nimport Router from 'next/router';\r\nimport { withRouter } from 'next/router'; //use router,export component with router\r\nimport { getCookie, isLoggedIn } from '../../actions/handleCookie';\r\nimport { listJournalForManage,deleteJournal,updateJournal } from '../../actions/journal';\r\nimport renderHTML from 'react-render-html'\r\nimport moment from 'moment'\r\n\r\nconst AmendJournal = () => {\r\n\tconst [journals,setJournals] = useState([])\r\n\tconst [message,setMessage] = useState('')\r\n\tconst token = getCookie('token')\r\n\r\n\t//when component mount\r\n\tuseEffect(()=>{\r\n\t\tloadJournals()\r\n\t},[])\r\n\r\n\tconst loadJournals = () => {\r\n\t\tlistJournalForManage().then(data=>{\r\n\t\t\tif(data.error){\r\n\t\t\t\tconsole.log(data.error)\r\n\t\t\t} else {\r\n\t\t\t\tsetJournals(data)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst removeJournal = (slug,token) => {\r\n\t\tdeleteJournal(slug,token).then(data=>{\r\n\t\t\tif(data.error){\r\n\t\t\t\tconsole.log(data.error)\r\n\t\t\t} else {\r\n\t\t\t\tsetMessage('Delete Successfully')\r\n\t\t\t\tloadJournals()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst deleteConfirm = (slug) => {\r\n\t\t\tlet answer = window.confirm('Delete this journal ?')\r\n\t\t\tif(answer){\r\n\t\t\t\tremoveJournal(slug)\r\n\t\t\t}\r\n\t}\r\n\r\n\tconst showJournals = () => {\r\n\t\treturn journals.map((journal,index)=>{\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"mt-5 pb-5\" key={index}>\r\n\t\t\t\t<h3>{journal.title}</h3>\r\n\t\t\t\t<p className=\"mark\">\r\n\t\t\t\tWritten by {journal.author.name}  || Created at {moment(journal.createdAt).fromNow()} \r\n\t\t\t\t</p>\r\n\t\t\t\t<button className=\"btn btn-sm btn-danger\" onClick={()=>deleteConfirm(journal.slug)}>Delete</button>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-md-12\">{showJournals()}</div>\r\n\t\t\t\t</div>\t\r\n\t\t</React.Fragment>\r\n\t)\r\n}\r\n\r\nexport default AmendJournal"]},"metadata":{},"sourceType":"module"}