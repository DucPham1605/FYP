{"version":3,"file":"static/webpack/static\\development\\pages\\admin\\journal-manage.js.4234a69eb5e8fa8534d6.hot-update.js","sources":["webpack:///./components/Journal/AmendJournal.js"],"sourcesContent":["import Link from 'next/link';\r\nimport { useState, useEffect } from 'react';\r\nimport Router from 'next/router';\r\nimport { withRouter } from 'next/router'; //use router,export component with router\r\nimport { getCookie, isLoggedIn } from '../../actions/handleCookie';\r\nimport { listJournalForManage,deleteJournal,updateJournal } from '../../actions/journal';\r\nimport renderHTML from 'react-render-html'\r\nimport moment from 'moment'\r\n\r\nconst AmendJournal = () => {\r\n\tconst [journals,setJournals] = useState([])\r\n\tconst [message,setMessage] = useState('')\r\n\tconst token = getCookie('token')\r\n\r\n\t//when component mount\r\n\tuseEffect(()=>{\r\n\t\tloadJournals()\r\n\t},[])\r\n\r\n\tconst loadJournals = () => {\r\n\t\tlistJournalForManage().then(data=>{\r\n\t\t\tif(data.error){\r\n\t\t\t\tconsole.log(data.error)\r\n\t\t\t} else {\r\n\t\t\t\tsetJournals(data)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst removeJournal = (slug,token) => {\r\n\t\tdeleteJournal(slug,token).then(data=>{\r\n\t\t\tif(data.error){\r\n\t\t\t\tconsole.log(data.error)\r\n\t\t\t} else {\r\n\t\t\t\tsetMessage('Delete Successfully')\r\n\t\t\t\tloadJournals()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst deleteConfirm = (slug) => {\r\n\t\t\tlet answer = window.confirm('Delete this journal ?')\r\n\t\t\tif(answer){\r\n\t\t\t\tremoveJournal(slug)\r\n\t\t\t}\r\n\t}\r\n\r\n\tconst showJournals = () => {\r\n\t\treturn journals.map((journal,index)=>{\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"mt-5 pb-5\" key={index}>\r\n\t\t\t\t<h3>{journal.title}</h3>\r\n\t\t\t\t<p className=\"mark\">\r\n\t\t\t\tWritten by {journal.author.name}  || Created at {moment(journal.createdAt).fromNow()} \r\n\t\t\t\t</p>\r\n\t\t\t\t<button className=\"btn btn-sm btn-danger\" onClick={()=>deleteConfirm(journal.slug)}>Delete</button>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-md-12\">{showJournals()}</div>\r\n\t\t\t\t</div>\t\r\n\t\t</React.Fragment>\r\n\t)\r\n}\r\n\r\nexport default AmendJournal"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;;;;A","sourceRoot":""}