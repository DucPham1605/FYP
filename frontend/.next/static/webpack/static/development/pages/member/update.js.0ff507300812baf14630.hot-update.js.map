{"version":3,"file":"static/webpack/static\\development\\pages\\member\\update.js.0ff507300812baf14630.hot-update.js","sources":["webpack:///./components/Profile/ProfileUpdate.js"],"sourcesContent":["import Link from 'next/link'\r\nimport {useState,useEffect} from 'react'\r\nimport Router from 'next/router'\r\nimport {getCookie,isLoggedIn} from '../../actions/handleCookie'\r\nimport {getProfile,updateProfile} from '../../actions/member'\r\nimport {API} from '../../config.js'\r\nimport {updateMember} from '../../actions/auth'\r\n\r\n\r\nconst ProfileUpdate = () => {\r\n\tconst [values,setValues] = useState({\r\n\t\tusername: '',\r\n\t\tname: '',\r\n\t\temail:'',\r\n\t\tpassword:'',\r\n\t\terror: false,\r\n\t\tsuccess: false,\r\n\t\tphoto:'',\r\n\t\tabout:'',\r\n\t\tformData: '' \r\n\t})\t\r\n\r\n\tconst token = getCookie('token')\r\n\tconst {username,name,email,password,error,success,photo,formData,about} = values\r\n\r\n\tconst loadMemberProfile = () => {\r\n\t\tgetProfile(token).then(data=>{\r\n\t\t\tconsole.log(data)\r\n\t\t\tif(data.error)  {\r\n\t\t\t\tsetValues({...values,error: data.error})\r\n\t\t\t} else { \r\n\t\t\t\tsetValues({...values,username: data.username,name: data.name,email: data.email,about: data.about,formData: new FormData()})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(()=>{\r\n\t\tloadMemberProfile()\r\n\t},[])\r\n\r\n\tconst setData = () => {\r\n\t\tformData.set(\"username\",username)\r\n\t\tformData.set(\"name\",name)\r\n\t\tformData.set(\"email\",email)\r\n\t}\r\n\r\n\tconst handleSubmit = event => {\r\n\t\tevent.preventDefault()\r\n\t\tsetData()\r\n\t\tupdateProfile(token,formData).then(data=>{\r\n\t\t\tif(data.error){\r\n\t\t\t\tsetValues({...values,error: data.error,success: false})\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsetValues({...values,username: data.username,name: data.name,email: data.email,about: data.about, formData: new FormData(),success:true })\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleChange = name => event => {\r\n\t\tconst value = name === \"photo\" ? event.target.files[0] : event.target.value\r\n\t\tformData.set(name,value)\r\n\t\tsetValues({...values,[name]:value,formData,error: false,success:false})\r\n\t}\r\n\r\n\tconst showProfileForm = () => {\r\n\t\treturn <form onSubmit={handleSubmit}>\r\n\t\t\t<div className=\"form-group\">\r\n\t\t\t\t<label className=\"btn btn-outline-info\">\r\n\t\t\t\t\tProfile Photo\r\n\t       \t\t\t<input onChange={handleChange('photo')} type=\"file\" accept=\"images/*\" hidden/> \r\n\t   \t\t\t</label>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"form-group\">\r\n\t\t\t\t<label className=\"text-muted\">Name</label>\r\n\t\t\t\t<input onChange={handleChange('name')} type=\"text\" className=\"form-control\" value={name}/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"form-group\">\r\n\t\t\t\t<label className=\"text-muted\">Username</label>\r\n\t\t\t\t<input onChange={handleChange('username')} type=\"text\" className=\"form-control\" value={username}/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"form-group\">\r\n\t\t\t\t<label className=\"text-muted\">Email</label>\r\n\t\t\t\t<input onChange={handleChange('email')} type=\"text\" className=\"form-control\" value={email}/>\r\n\t\t\t</div>\r\n{/*\t\t\t<div className=\"form-group\">\r\n\t\t\t\t<label className=\"text-muted\">Password</label>\r\n\t\t\t\t<input onChange={handleChange('password')} type=\"text\" className=\"form-control\"/>\r\n\t\t\t</div>*/}\r\n\t\t\t<div className=\"form-group\">\r\n\t\t\t\t<label className=\"text-muted\">About</label>\r\n\t\t\t\t<textarea onChange={handleChange('about')} type=\"text\" className=\"form-control\" value={about} />\r\n\t\t\t</div>\r\n\t\t\t<button  className=\"btn btn-primary\">Submit</button>\r\n\r\n\t\t</form>\r\n\t}\r\n\r\n\tconst showStatus = () => {\r\n\t\tif(error){\r\n\t\t\treturn <div className=\"alert alert-danger pb-2 pt-2\">{error}</div>\r\n\t\t} else if(success === true){\r\n\t\t\treturn <div className=\"alert alert-success pb-2 pt-2\">Updated Successfully</div>\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-md-4\">\r\n\t\t\t\t\t\t<img \r\n\t\t\t\t\t\t\tsrc={`${API}/member/photo/${username}`} \r\n\t\t\t\t\t\t\tclassName=\"img img-fluid\"\r\n\t\t\t\t\t\t\tstyle={{maxHeight: 'auto',maxWidth: '100%'}}\r\n\t\t\t\t\t\t\talt=\"user profile picture\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-md-8 mb-5\">\r\n\t\t\t\t\t\t{showStatus()}\r\n\t\t\t\t\t\t{showProfileForm()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</React.Fragment>\r\n\t)\r\n\r\n}\r\n\r\nexport default ProfileUpdate\r\n\r\n//make req to backend to get member info\r\n//populated in form"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AADA;AAAA;AACA;AAYA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAeA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAJA;AACA;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AAGA;;;;A","sourceRoot":""}