{"version":3,"file":"static/webpack/static\\development\\pages\\journals.js.5d293f08691054e327ea.hot-update.js","sources":["webpack:///./pages/journals/index.js"],"sourcesContent":["//build-in component for sticking elements to 'head' of the page\r\nimport Link from 'next/link'\r\nimport Layout from '../../components/Layout'\r\nimport {useState} from 'react'\r\nimport {listJournals} from '../../actions/journal'\r\nimport {API,APP_NAME,DOMAIN} from '../../config'\r\nimport renderHTML from 'react-render-html'\r\nimport moment from 'moment'\r\nimport SingleJournal from '../../components/Journal/SingleJournal'\r\n//need to write a metatitle and meta description,opengraph title descrip\r\n\r\nconst Journal = ({journals,categories,tags,journalTotal,journalLimit,journalSkip}) => {\r\n\t//keeping track of journal limit,skip and size\r\n\tconst [limit,setLimit]=useState(journalLimit)\r\n\tconst [skip,setSkip]=useState(journalSkip)\r\n\tconst [size,setSize]=useState(journalTotal)\r\n\t//loaded blogs are kept tracked\r\n\tconst [loadedJournals,setloadedJournals] = useState([])\r\n\r\n\r\n//existed blogs will be skipped\r\n\tconst loadMoreJournals = () => {\r\n\t\t//skip existing journals\r\n\t\tlet toSkip = skip + limit\r\n\t\tlistJournals(toSkip,limit).then(data=>{\r\n\t\t\tif(data.error){\r\n\t\t\t\tconsole.log(data.error)\r\n\t\t\t} else {\r\n\t\t\t\tsetloadedJournals([...loadedJournals,...data.journals])\r\n\t\t\t\tsetSkip(toSkip)\r\n\t\t\t\tsetSize(data.size)\r\n\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst loadMoreButton = () => {\r\n\t\treturn (\r\n\t\t\tsize > 0 && size >= limit && (\r\n\t\t\t\t<button onClick={loadMoreJournals} className=\"btn btn-primary\">Load More</button>\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\r\n\tconst showAllCategories = () => {\r\n\t\treturn categories.map((category,index)=>{\r\n\t\t\treturn <Link key={index} href={`/categories/${category.slug}`}>\r\n\t\t\t\t<a className=\"btn btn-primary mr-1 ml-1 mt-3\">{category.name}</a>\r\n\t\t\t</Link>\r\n\t\t})\r\n\t}\r\n\r\n\t//default journal\r\n\tconst showAllJournals = () => {\r\n\t\treturn journals.map((journal,index)=>{\r\n\t\t\treturn <article key={index}>\r\n\t\t\t\t<SingleJournal journal={journal} />\r\n\t\t\t\t<hr/>\r\n\t\t\t</article>\r\n\t\t})\r\n\t}\r\n\r\n\t//show more journals from state\r\n\tconst showMoreJournals = () => {\r\n\t\treturn loadedJournals.map((journal,index)=>{\r\n\t\t\treturn <article key={index}>\r\n\t\t\t\t<SingleJournal journal={journal}/>\r\n\t\t\t\t<hr/>\r\n\t\t\t</article>\r\n\t\t})\r\n\t}\r\n\r\n\treturn(\r\n\t\t<React.Fragment>\r\n\t\t\t<Layout>\r\n\t\t\t\t<main>\r\n\t\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t<header>\r\n\t\t\t\t\t\t<div className=\"col-md-12 pt-3\">\r\n\t\t\t\t\t\t\t<h1 className=\"display-4 font-weight-bold text-center\">Journals</h1>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<section>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div className=\"display-4\">Journal Categories: {showAllCategories()} </div>\r\n\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t{showAllJournals()}\r\n\t\t\t\t\t\t{showMoreJournals()}\r\n\t\t\t\t\t\t{loadMoreButton()}\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\t\t\t</Layout>\r\n\t\t</React.Fragment>\r\n\t)\r\n}\r\n\r\n//using lifecycle method\r\n//request sent to backend\r\nJournal.getInitialProps = () => {\r\n\r\n\tlet skip=0\r\n\tlet limit=2\r\n\r\n\treturn listJournals(skip,limit).then(data=>{\r\n\t\tif (data.error) {\r\n\t\t\tconsole.log(data.error)\r\n\t\t} else {\r\n\t\t\t//return properties from response\r\n\t\t\t//props can be passed to funtion to be rendered\r\n\t\t\treturn {\r\n\t\t\t\tjournals: data.journals,\r\n\t\t\t\tcategories: data.categories,\r\n\t\t\t\ttags: data.tags,\r\n\t\t\t\tjournalTotal: data.size,\r\n\t\t\t\tjournalLimit: limit,\r\n\t\t\t\tjournalSkip: skip\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n}\r\n\r\n\r\n\r\nexport default Journal\r\n\r\n//getInitialProps: server-side rendered method. Can only be used on pages, not in the components\r\n//server side render the page"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAGA;AACA;AACA;AADA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AAGA;AAGA;;;;A","sourceRoot":""}